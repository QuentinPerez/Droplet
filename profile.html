<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Droplet: Profile File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Droplet
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Profile File </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Syntax and semantics of the profile file.</p>
<h1><a class="anchor" id="format"></a>
Syntax Overview</h1>
<p>The profile file is in UNIX text format, with lines separated by '\n' (newline) characaters.</p>
<p>Comments begin with a '#' character and continue until the end of the line.</p>
<p>Most of the file is made up of strings. A string is a sequence of characters which are not spaces or any of the other significant characters. C-style \n \r \t and \\ character escape sequences are recognised in strings. All other uses of \ are silently ignored, e.g. \x is just x. Strings can be quoted by surrounding them with '"' (doublequote) characters; character escapes do not work inside quoted strings but quoted strings can span whitespace including end of line. Strings may be at most 256 characters long.</p>
<p>The ' ' (space) and '\t' (tab) characters are ignored except in a quoted string.</p>
<p>The file is a sequence of variable assignments, in the format <code>variable = value</code> where both <code>variable</code> and <code>value</code> are strings. Assignments are terminated at the unquoted end of a line or by an unquoted ';' (semicolon) character.</p>
<h1><a class="anchor" id="abnf"></a>
Syntax in Detail</h1>
<p>Here is the profile file syntax in ABNF form, which is <a href="http://tools.ietf.org/html/rfc5234">defined in RFC5234</a>. </p>
<pre class="fragment">    profile = *( *LWS item ) *LWS

    item = assignment / comment

    comment = %x23 *( %x00-09 %x0b-%xff ) LF
        ; from '#' character to newline

    assignment = variable *LWS "=" *LWS value *LWS ( LF / ";" )
        ; assignments end at newline or semicolon

    variable = string

    value = bool / addrlist / int / inth / path

    bool = "true" / "false"
        ; case sensitive

    addrlist = addr *( ( SP / COMMA / SEMIC ) addr )
    addr = host [ ":" port ]
    host = hostname / ipv4-addr
    hostname = dot-atom
        ; from RFC 5322.  DNS host name, case insensitive
    ipv4-addr = 1*3DIGIT 3( "." 1*3DIGIT )
        ; IPv4 address in dotted-quad form, see RFC 1166
    port = int

    int = 1*DIGIT

    inth = int / ( "0x" 1*XDIGIT )
        ; integer, possibly in hexadecimal

    path = string
        ; unix-style '/' separated pathname.  May be used
        ; either for HTTP or as a local filesystem name.

    string = quoted-string / simple-string
    quoted-string = DQUOTE *NOTDQUOTE DQUOTE
    simple-string = 1*( STR / escaped-char )
    escaped-char = ( BSLASH "r" ) /
                   ( BSLASH "n" ) /
                   ( BSLASH "t" ) /
                   ( BSLASH BSLASH )

    TAB = %x09
        ; tab character
    LF = %x0a
        ; newline character
    SP = %x20
        ; ' ' (space) character
    DQUOTE = %x22
        ; '"' (double quote) character
    HASH = %x23
        ; '#' (hash, pound) character
    COMMA = %x2c
        ; ',' (comma) character
    SEMIC = %x3b
        ; ';' (semicolon) character
    EQUAL = %x3d
        ; '=' (equals) character
    BSLASH = %x5c
        ; '\\' (backslash) character
    NOTDQUOTE = %x00-%x21 / %x23-%xff
        ; anything but a double quote
    LWS = SP / TAB
        ; linear whitespace characters
    DIGIT = %x30-39
        ; ASCII decimal digits
    XDIGIT = %x30-39 / %x41-46 / %x61-66
        ; ASCII hexadecimal digits
    STR = %x00-08 %x0b-1f %x21 %x24-3a %x3c %x3e-5b %x5d-ff
        ; string characters, all characters except TAB LF SP
        ; DQUOTE HASH SEMIC EQUAL BSLASH
</pre><h1><a class="anchor" id="variables"></a>
Variables</h1>
<p>This section describes the semantics of each variable which can be set in a a profile file.</p>
<dl class="section user"><dt>use_https = &lt;bool&gt;</dt><dd>Whether to use the https protocol (i.e. to enable TLS transport encryption). Default is <code>false</code>. You should set this variable to <code>true</code> if the cloud server is outside your internal network.</dd></dl>
<dl class="section user"><dt>host = &lt;addrlist&gt;</dt><dd>A list of hosts to connect to. Hosts are separated by any of the ' ' (space) ',' (comma) or ';' (semicolon) characters. Note that the ';' character needs to be escaped from the profile file syntax using double quotes. Each hostname may optionally be followed by a ':' (colon) character and a decimal port number. The default port is 80, or 443 if <code>use_https</code> is <code>true</code>.</dd></dl>
<p>Hostnames are looked up using the operating system's name service, which usually means that any of the following will be accepted: hostname, FQDN, or IPv4 address literal in dotted-quad notation. IPv6 addresses are not supported.</p>
<p>Connections made using the context will be spread amongst all the listed hosts in round-robin fashion, in an order which is randomised from the order specified in the <code>host</code> variable.</p>
<p>The hostnames are looked up in the operating system's name service once when the profile is loaded, and then once more just before each connection is made. This may slow down connections if your operating system does not implement a name service cache. This may also result in interesting behaviour if your cloud service provider uses round-robin DNS.</p>
<p>There is no default host list. All backends except <code>posix</code> require <code>host</code> to be specified in the profile. Examples: </p>
<pre class="fragment">    host = server
    host = server1,server2,server3
    host = server1:8080,server2:4080
    host = 192.168.100.20
    host = my.external.server.com
    host = "server1;server2"
</pre><dl class="section user"><dt>port</dt><dd>This variable is deprecated; if specified it is ignored with a warning.</dd></dl>
<dl class="section user"><dt>blacklist_expiretime = &lt;int&gt;</dt><dd>The number of seconds for which unresponsive hosts listed in the <code>host</code> variable will be blacklisted. Blacklisted hosts will not be connected to. The default is 10 seconds.</dd></dl>
<dl class="section user"><dt>header_size = &lt;inth&gt;</dt><dd>The size in bytes of the buffer used to construct HTTP headers sent to the cloud service. The default is 8192 bytes.</dd></dl>
<dl class="section user"><dt>base_path = &lt;path&gt;</dt><dd>This path is prepended to all HTTP resource names (or pathnames of files, for the <code>posix</code> backend). The default is <code>"/"</code>.</dd></dl>
<dl class="section user"><dt>access_key = &lt;string&gt;</dt><dd>Used as the username for HTTP Basic Authorization in the <code>cdmi</code> and <code>sproxy</code> backends, or Amazon's AWS authorization for the <code>s3</code> backend. There is no default.</dd></dl>
<dl class="section user"><dt>secret_key = &lt;string&gt;</dt><dd>Used as the password for HTTP Basic Authorization for the <code>cdmi</code> and <code>sproxyd</code> backends, or Amazon's AWS authorization for the <code>s3</code> backend. Note that with Basic the password is sent unencrypted, so you should make sure to set <code>use_https</code> to <code>true</code> to provide any level of security at all. There is no default.</dd></dl>
<dl class="section user"><dt>ssl_cert_file = &lt;path&gt;</dt><dd>Specifies a pathname, either absolute or relative to the droplet directory, to a file containing a client certificate chain which may be sent to the server (if <code>use_https</code> is <code>true</code> and the server requests a certificate). The certificates in the chain must be in PEM format and must be sorted starting with the server's certificate followed by intermediate CA certificates if applicable, and ending at the root CA. There is no default.</dd></dl>
<dl class="section user"><dt>ssl_key_file = &lt;path&gt;</dt><dd>Specifies a pathname, either absolute or relative to the droplet directory, to a file containing a client private key used in conjunction with the client certificate chain specified by the <code>ssl_cert_file</code> variable. Only used when <code>use_https</code> is <code>true</code>. The key file must be in PEM format. There is no default.</dd></dl>
<dl class="section user"><dt>ssl_password = &lt;string&gt;</dt><dd>Specifies a string used as the password for decrypting the SSL client private key specified in the <code>ssl_key_file</code> variable. Only used when <code>use_https</code> is <code>true</code>. There is no default.</dd></dl>
<dl class="section user"><dt>ssl_ca_list = &lt;path&gt;</dt><dd>Specifies an absolute pathname to a file containing trusted CA certificates used when verifying a certificate chain sent by a server. Only used when <code>use_https</code> is <code>true</code>. The CA certificate file may contain multiple certificates and must be in PEM format. There is no default value. Note that Droplet does not automatically use the operating system's default CA certificate stores, so if you want any security at all you should set <code>ssl_ca_list</code> to the correct value for your operating system. The correct value on Ubuntu is <code>"/etc/ssl/certs/ca-certificates.crt"</code>.</dd></dl>
<dl class="section user"><dt>pricing = &lt;string&gt;</dt><dd>Specifies the name of a pricing model. The pricing model is read from a file named <code>&lt;name&gt;.pricing</code> in the droplet directory where <code>&lt;name&gt;</code> is the name of the pricing model. See Pricing Model for a description of the pricing model and the syntax of the pricing file. Pricing information is currently not used. There is no default.</dd></dl>
<dl class="section user"><dt>pricing_dir = &lt;path&gt;</dt><dd>Specifies the absolute path of a directory containing log files of chargeable events. The log file will be appended to as the library emits requests to the server. Note that the log file is written in buffered mode and is not flushed until the context is closed. The name of the log file is <code>&lt;name&gt;.csv</code> where <code>&lt;name&gt;</code> is the name of the profile. See <em>Pricing Model</em> for a description of the log file. The default is the droplet directory, i.e. chargeable events are logged by default. To turn off logging specify an empty string, like this <pre class="fragment">    pricing = ""    # turns off logging of chargeable events
</pre></dd></dl>
<dl class="section user"><dt>read_buf_size = &lt;inth&gt;</dt><dd>Size in bytes of the buffer used to read from the HTTP socket. The default is 8192 bytes.</dd></dl>
<dl class="section user"><dt>encrypt_key = &lt;string&gt;</dt><dd>Specifies the key which is used for the optional encryption feature in the VFS interface. To enable file encryption, use the <code>DPL_VFILE_FLAG_ENCRYPT</code> flag in the <code>flags</code> parameter to either <code>dpl_openread()</code> or <code>dpl_openwrite()</code>. File encryption uses the AES-256 cipher. There is no default.</dd></dl>
<dl class="section user"><dt>backend = &lt;string&gt;</dt><dd>Name of the protocol used to talk to the server. The default is <code>s3</code>. The backends are:</dd></dl>
<ul>
<li><b>s3</b> Amazon's S3 (Simple Storage Service)</li>
<li><b>cdmi</b> The SNIA's Cloud Management Data Interface</li>
<li><b>posix</b> A backend which stores data in the local filesystem. Useful only for testing.</li>
<li><b>srws</b> A vendor-specific RESTful interface provided by Scality's RING.</li>
<li><b>sproxyd</b> A vendor-specific RESTful interface provided by Scality's RING.</li>
</ul>
<dl class="section user"><dt>encode_slashes = &lt;bool&gt;</dt><dd>Controls whether the '/' (solidus, a.k.a. forward slash) character is encoded when URL-encoding the resource name in HTTP requests. Some servers may care. Used only when <code>url_encoding</code> is <code>true</code>. The default is <code>false</code>.</dd></dl>
<dl class="section user"><dt>keep_alive = &lt;bool&gt;</dt><dd>Controls whether HTTP connection sockets are kept alive between HTTP requests. If set to <code>true</code>, HTTP connections are reused for multiple requests (subject to an idle timeout). If set to <code>false</code>, a new HTTP connection is started for each request. Note that this has nothing at all to do with TCP keepalive. The default is <code>true</code>.</dd></dl>
<dl class="section user"><dt>url_encoding = &lt;bool&gt;</dt><dd>Controls whether the resource name in HTTP requests is URL-encoded. Some servers may care. The default is <code>true</code>.</dd></dl>
<dl class="section user"><dt>enterprise_number = &lt;inth&gt;</dt><dd>Specifies an SNMP Enterprise Number, which is used in the <code>cdmi</code> backend to generate unique ObjectIDs. Enterprise Number assignments are published <a href="http://www.iana.org/assignments/enterprise-numbers/enterprise-numbers">by IANA</a>. For example, SGI's Enterprise Number is 59. The default is 37489 (assigned to Scality). </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 24 2014 11:26:56 for Droplet by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
