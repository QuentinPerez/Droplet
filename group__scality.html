<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Droplet: Scality specific functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Droplet
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Scality specific functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions specific to Scality backends.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab5459ce46c02f6e053e747c919ab1068"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#gab5459ce46c02f6e053e747c919ab1068">dpl_scal_gc_gen_key</a> (BIGNUM *id, int cl)</td></tr>
<tr class="memdesc:gab5459ce46c02f6e053e747c919ab1068"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a GC key.  <a href="#gab5459ce46c02f6e053e747c919ab1068"></a><br/></td></tr>
<tr class="memitem:ga89b1b04c5f784569b8aa65c35aece7c0"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#ga89b1b04c5f784569b8aa65c35aece7c0">dpl_scal_gc_index_init</a> (<a class="el" href="structdpl__dbuf__t.html">dpl_dbuf_t</a> **indexp)</td></tr>
<tr class="memdesc:ga89b1b04c5f784569b8aa65c35aece7c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and initialises a new dbuf which can be used to create a GC index.  <a href="#ga89b1b04c5f784569b8aa65c35aece7c0"></a><br/></td></tr>
<tr class="memitem:gaa17d746add5f06f271029baed3559f3f"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#gaa17d746add5f06f271029baed3559f3f">dpl_scal_gc_index_serialize</a> (BIGNUM *chunkkey, uint64_t offset, uint64_t size, <a class="el" href="structdpl__dbuf__t.html">dpl_dbuf_t</a> *buffer)</td></tr>
<tr class="memdesc:gaa17d746add5f06f271029baed3559f3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an object ID to a GC index.  <a href="#gaa17d746add5f06f271029baed3559f3f"></a><br/></td></tr>
<tr class="memitem:gac0f3e24bf8f411e53157e98e27f9a5b8"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#gac0f3e24bf8f411e53157e98e27f9a5b8">dpl_uks_gen_key_raw</a> (BIGNUM *id, uint32_t hash, uint64_t oid, uint32_t volid, uint8_t serviceid, uint32_t specific)</td></tr>
<tr class="memdesc:gac0f3e24bf8f411e53157e98e27f9a5b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a UKS key from raw data.  <a href="#gac0f3e24bf8f411e53157e98e27f9a5b8"></a><br/></td></tr>
<tr class="memitem:ga8dd443811071fffc345cec72a773a351"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#ga8dd443811071fffc345cec72a773a351">dpl_uks_gen_key_ext</a> (BIGNUM *id, dpl_uks_mask_t mask, uint64_t oid, uint32_t volid, uint8_t serviceid, uint32_t specific)</td></tr>
<tr class="memdesc:ga8dd443811071fffc345cec72a773a351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set some fields in a binary UKS key.  <a href="#ga8dd443811071fffc345cec72a773a351"></a><br/></td></tr>
<tr class="memitem:ga76e38849b58b40a9af2be245440cd5bd"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#ga76e38849b58b40a9af2be245440cd5bd">dpl_uks_gen_key</a> (BIGNUM *id, uint64_t oid, uint32_t volid, uint8_t serviceid, uint32_t specific)</td></tr>
<tr class="memdesc:ga76e38849b58b40a9af2be245440cd5bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a binary UKS key.  <a href="#ga76e38849b58b40a9af2be245440cd5bd"></a><br/></td></tr>
<tr class="memitem:ga885151dab3acac0b2683920398cf9d75"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#ga885151dab3acac0b2683920398cf9d75">dpl_uks_set_class</a> (BIGNUM *k, int cl)</td></tr>
<tr class="memdesc:ga885151dab3acac0b2683920398cf9d75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the class field in a UKS key.  <a href="#ga885151dab3acac0b2683920398cf9d75"></a><br/></td></tr>
<tr class="memitem:ga0d91d33892bdac2f4117947451455b0b"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#ga0d91d33892bdac2f4117947451455b0b">dpl_uks_set_replica</a> (BIGNUM *k, int replica)</td></tr>
<tr class="memdesc:ga0d91d33892bdac2f4117947451455b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the replica field in a UKS key.  <a href="#ga0d91d33892bdac2f4117947451455b0b"></a><br/></td></tr>
<tr class="memitem:ga4554ab381f085daa301b86eb731821f2"><td class="memItemLeft" align="right" valign="top">dpl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scality.html#ga4554ab381f085daa301b86eb731821f2">dpl_uks_bn2hex</a> (const BIGNUM *id, char *id_str)</td></tr>
<tr class="memdesc:ga4554ab381f085daa301b86eb731821f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a binary UKS key to string form.  <a href="#ga4554ab381f085daa301b86eb731821f2"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<p>This module contains utility functions for dealing with the Scality backend cloud provider.</p>
<p>Several of these functions deal with Scality's UKS (Universal Key Scheme) which is the binary object ID format used in Scality's RING software. UKS keys are 160 bits long and are divided into several fixed-length fields which encode specific information. Fields include:</p>
<ul>
<li><b>hashing/dispersion</b> (24b) used to help distribute objects around multiple servers in a ring, normally an MD5 hash of the payload field.</li>
</ul>
<ul>
<li><b>payload</b> (128b) Further information, broken out below.</li>
</ul>
<ul>
<li><b>class</b> (4b). Classes from 0-5 specify the number of <em>additional</em> copies to be stored, i.e. class 2 means 3 copies will be stored. Some of the class numbers 6-15 are used for other purposes.</li>
</ul>
<ul>
<li><b>replica</b> (4b). The replica number for classes 0-5, i.e. 0 for the first copy, 1 for the second copy.</li>
</ul>
<p>You can store anything you like in the <b>payload</b> field, but a recommended format is to use the following bit fields.</p>
<ul>
<li><b>Object</b> <b>ID</b> (64b). Identifies an object, e.g. an inode number.</li>
</ul>
<ul>
<li><b>Volume</b> <b>ID</b> (32b). Identifies a virtual volume, e.g. a filesystem.</li>
</ul>
<ul>
<li><b>Application</b> <b>ID</b> (8b). Also known as <b>Service</b> <b>ID</b>. A fixed field identifying your application, to allow multiple applications to use the same RING storage. To avoid clashing with future Scality software, use a number greater than 0xc0.</li>
</ul>
<ul>
<li><b>Application</b> <b>Specific</b> (24b), e.g. block offset within the file. </li>
</ul>
<h2>Function Documentation</h2>
<a class="anchor" id="gab5459ce46c02f6e053e747c919ab1068"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpl_scal_gc_gen_key </td>
          <td>(</td>
          <td class="paramtype">BIGNUM *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generates into <em>id</em> a special UKS key which does not refer to an actual object but which can be used to invoke the Scality GC service. The object ID is stored in a <code>BIGNUM</code> structure, which you should create with <code>BN_new()</code> and free with <code>BN_free()</code>.</p>
<p>To delete multiple objects in a single protocol call, use this GC key as the <em>id</em> parameter of a <code>dpl_put_id()</code> call, and pass the contents of a GC index as the PUT data. See <code><a class="el" href="group__scality.html#ga89b1b04c5f784569b8aa65c35aece7c0" title="Creates and initialises a new dbuf which can be used to create a GC index.">dpl_scal_gc_index_init()</a></code> for details on how to create a GC index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">id</td><td>the UKS key is returned here </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cl</td><td>the UKS class (e.g. 2) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga89b1b04c5f784569b8aa65c35aece7c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_scal_gc_index_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdpl__dbuf__t.html">dpl_dbuf_t</a> **&#160;</td>
          <td class="paramname"><em>indexp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>GC indexes are effectively a list of object IDs and can be used to delete multiple objects in a single API call. Individual object IDs can be added to the GC index by calling <code><a class="el" href="group__scality.html#gaa17d746add5f06f271029baed3559f3f" title="Add an object ID to a GC index.">dpl_scal_gc_index_serialize()</a></code>.</p>
<p>You should free the dbuf using <code>dpl_dbuf_free()</code> when you have finished using it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">indexp</td><td>on success, a new dbuf is returned here </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>on success, or </td></tr>
    <tr><td class="paramname">DPL_*</td><td>a Droplet error code on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaa17d746add5f06f271029baed3559f3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_scal_gc_index_serialize </td>
          <td>(</td>
          <td class="paramtype">BIGNUM *&#160;</td>
          <td class="paramname"><em>chunkkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdpl__dbuf__t.html">dpl_dbuf_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds an object ID to a GC index. The GC index <em>buffer</em> should have been created using <code><a class="el" href="group__scality.html#ga89b1b04c5f784569b8aa65c35aece7c0" title="Creates and initialises a new dbuf which can be used to create a GC index.">dpl_scal_gc_index_init()</a></code>, the object ID <em>chunkkey</em> using <code><a class="el" href="group__scality.html#ga76e38849b58b40a9af2be245440cd5bd" title="Generate a binary UKS key.">dpl_uks_gen_key()</a></code>.</p>
<p>If this function returns failure, the GC index cannot be used and you should free it immediately using <code>dpl_dbuf_free()</code>.</p>
<p>If the object is a part of a logical file at some higher level of abstraction, you may pass the byte range of the object within that logical file as <em>offset</em> and <em>size</em>, but this is not necessary.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chunkkey</td><td>the binary UKS key to add, may not be NULL </td></tr>
    <tr><td class="paramname">offset</td><td>byte offset in some logical file (optional) </td></tr>
    <tr><td class="paramname">size</td><td>byte size in some logical file (optional) </td></tr>
    <tr><td class="paramname">buffer</td><td>the dbuf in which the GC index is being built, may not be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>on success, or </td></tr>
    <tr><td class="paramname">DPL_*</td><td>a Droplet error code on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4554ab381f085daa301b86eb731821f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_uks_bn2hex </td>
          <td>(</td>
          <td class="paramtype">const BIGNUM *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>id_str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts the binary UKS key in <em>id</em> to a string form in <em>id_str</em>. The string form is suitable for use as the <em>id</em> parameter of the RESTful functions such as <code>dpl_put_id()</code>. The binary key <em>id</em> is stored in a <code>BIGNUM</code> structure, which you should create with <code>BN_new()</code> and free with <code>BN_free()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">id</td><td>the binary UKS key </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">id_str</td><td>on success the string form is written here, must be at least <code>DPL_UKS_BCH_LEN+1</code> bytes long </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>on success, or </td></tr>
    <tr><td class="paramname">DPL_*</td><td>a Droplet error code on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga76e38849b58b40a9af2be245440cd5bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_uks_gen_key </td>
          <td>(</td>
          <td class="paramtype">BIGNUM *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>volid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>serviceid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>specific</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets all the fields in a binary UKS key and automatically calculates the hashing/dispersion field. You should also call <code><a class="el" href="group__scality.html#ga885151dab3acac0b2683920398cf9d75" title="Set the class field in a UKS key.">dpl_uks_set_class()</a></code> to set the class field. The binary key <em>id</em> is stored in a <code>BIGNUM</code> structure, which you should create with <code>BN_new()</code> and free with <code>BN_free()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the binary UKS key </td></tr>
    <tr><td class="paramname">oid</td><td>will be used as the Object ID field </td></tr>
    <tr><td class="paramname">volid</td><td>will be used as the Volume ID field </td></tr>
    <tr><td class="paramname">serviceid</td><td>will be used as the Service ID field </td></tr>
    <tr><td class="paramname">specific</td><td>will be used as the Application Specific field </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>on success, or </td></tr>
    <tr><td class="paramname">DPL_*</td><td>a Droplet error code on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8dd443811071fffc345cec72a773a351"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_uks_gen_key_ext </td>
          <td>(</td>
          <td class="paramtype">BIGNUM *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dpl_uks_mask_t&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>volid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>serviceid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>specific</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets some fields in a binary UKS key, according to a mask of which fields to set. Fields not specified in the mask are preserved. Automatically recalculates the hashing/dispersion field. You should also call <code><a class="el" href="group__scality.html#ga885151dab3acac0b2683920398cf9d75" title="Set the class field in a UKS key.">dpl_uks_set_class()</a></code> to set the class field. The binary key <em>id</em> is stored in a <code>BIGNUM</code> structure, which you should create with <code>BN_new()</code> and free with <code>BN_free()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the binary UKS key </td></tr>
    <tr><td class="paramname">mask</td><td>a bitmask of the following values indicating which fields to set <ul>
<li><code>DPL_UKS_MASK_OID</code> use the <em>oid</em> parameter as the Object ID field </li>
<li><code>DPL_UKS_MASK_VOLID</code> use the <em>volid</em> parameter as the Volume ID field </li>
<li><code>DPL_UKS_MASK_SERVICEID</code> use the  parameter as the Service ID field </li>
<li><code>DPL_UKS_MASK_SPECIFIC</code> use the  parameter as the Application Specific field. </li>
</ul>
</td></tr>
    <tr><td class="paramname">oid</td><td>will be used as the Object ID field if <code>DPL_UKS_MASK_OID</code> is present in <em>mask</em> </td></tr>
    <tr><td class="paramname">volid</td><td>will be used as the Volume ID field if <code>DPL_UKS_MASK_VOLID</code> is present in <em>mask</em> </td></tr>
    <tr><td class="paramname">serviceid</td><td>will be used as the Service ID field if <code>DPL_UKS_MASK_SERVICEID</code> is present in <em>mask</em> </td></tr>
    <tr><td class="paramname">specific</td><td>will be used as the Application Specific field if <code>DPL_UKS_MASK_SPECIFIC</code> is present in <em>mask</em> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>on success, or </td></tr>
    <tr><td class="paramname">DPL_*</td><td>a Droplet error code on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac0f3e24bf8f411e53157e98e27f9a5b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_uks_gen_key_raw </td>
          <td>(</td>
          <td class="paramtype">BIGNUM *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>volid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>serviceid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>specific</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generates a binary UKS key in <em>id</em> using raw data for each of the bitfields in the generic format. Note the class and replica fields should be set separately using <code><a class="el" href="group__scality.html#ga885151dab3acac0b2683920398cf9d75" title="Set the class field in a UKS key.">dpl_uks_set_class()</a></code> and <code><a class="el" href="group__scality.html#ga0d91d33892bdac2f4117947451455b0b" title="Set the replica field in a UKS key.">dpl_uks_set_replica()</a></code>. The binary key <em>id</em> is stored in a <code>BIGNUM</code> structure, which you should create with <code>BN_new()</code> and free with <code>BN_free()</code>.</p>
<p>Only use this function if you know what you are doing. Note particularly that this function requires you to calculate and set the hashing/dispersion field yourself. For most applications you should use either <code><a class="el" href="group__scality.html#ga8dd443811071fffc345cec72a773a351" title="Set some fields in a binary UKS key.">dpl_uks_gen_key_ext()</a></code> or <code><a class="el" href="group__scality.html#ga76e38849b58b40a9af2be245440cd5bd" title="Generate a binary UKS key.">dpl_uks_gen_key()</a></code> which will calculate the hashing/dispersion field for you.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the binary UKS key will be generated here </td></tr>
    <tr><td class="paramname">hash</td><td>will be used as the hashing/dispersion field </td></tr>
    <tr><td class="paramname">oid</td><td>will be used as the Object ID field </td></tr>
    <tr><td class="paramname">volid</td><td>will be used as the Volume ID field </td></tr>
    <tr><td class="paramname">serviceid</td><td>will be used as the Service ID field </td></tr>
    <tr><td class="paramname">specific</td><td>will be used as the Application Specific field </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>this function currently cannot fail </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga885151dab3acac0b2683920398cf9d75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_uks_set_class </td>
          <td>(</td>
          <td class="paramtype">BIGNUM *&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the class field in a UKS key. The binary key <em>id</em> is stored in a <code>BIGNUM</code> structure, which you should create with <code>BN_new()</code> and free with <code>BN_free()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>the binary UKS key </td></tr>
    <tr><td class="paramname">cl</td><td>will be used as the class field </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>on success, or </td></tr>
    <tr><td class="paramname">DPL_*</td><td>a Droplet error code on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0d91d33892bdac2f4117947451455b0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dpl_status_t dpl_uks_set_replica </td>
          <td>(</td>
          <td class="paramtype">BIGNUM *&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>replica</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the replica field in a UKS key. The binary key <em>id</em> is stored in a <code>BIGNUM</code> structure, which you should create with <code>BN_new()</code> and free with <code>BN_free()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>the binary UKS key </td></tr>
    <tr><td class="paramname">replica</td><td>will be used as the replica field </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DPL_SUCCESS</td><td>on success, or </td></tr>
    <tr><td class="paramname">DPL_*</td><td>a Droplet error code on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 17 2013 12:28:24 for Droplet by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
